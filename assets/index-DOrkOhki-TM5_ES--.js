import{i as s,a as u}from"./index-D6fLMv29-COUJrQhB.js";import{h as d,a as p,P as f,c as h,D as m,t as P,n as C}from"./MilkdownEditor-CQzOidG1.js";import"./index-Bso2Fy82.js";import"./mutex-yV3mxE7x.js";function g(n){var e;return n.childCount<=1&&!((e=n.firstChild)!=null&&e.content.size)}function y(n,e){const{selection:t}=n;if(!t.empty)return null;const o=t.$anchor,r=o.parent;if(r.content.size>0||P(a=>a.type.name==="table")(o))return null;const i=o.before();return C.node(i,i+r.nodeSize,{class:"crepe-placeholder","data-placeholder":e})}const c=d({text:"Please enter...",mode:"block"},"placeholderConfigCtx"),b=p(n=>new f({key:new h("CREPE_PLACEHOLDER"),props:{decorations:e=>{var t;const o=n.get(c.key);if(o.mode==="doc"&&!g(e.doc)||s(e.selection)||u(e.selection))return null;const r=(t=o.text)!=null?t:"Please enter...",l=y(e,r);return l?m.create(e.doc,[l]):null}}})),v=(n,e)=>{n.config(t=>{e&&t.update(c.key,o=>({...o,...e}))}).use(b).use(c)};export{v as defineFeature,c as placeholderConfig,b as placeholderPlugin};
